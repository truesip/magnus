<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Login - TalkUSA</title>
  <style>
    :root{
      --bg:#050816;
      --bg2:#0b1024;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);
      --primary:#4f46e5;
      --accent:#22d3ee;
      --accent2:#a78bfa;
      --shadow:0 24px 80px rgba(0,0,0,.55);
      --radius:16px;
      --radius2:22px;
      --max:1200px;
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background: radial-gradient(1200px 600px at 20% 10%, rgba(79,70,229,.18) 0%, transparent 55%),
                  radial-gradient(900px 520px at 85% 35%, rgba(34,211,238,.14) 0%, transparent 60%),
                  radial-gradient(900px 520px at 55% 90%, rgba(167,139,250,.10) 0%, transparent 60%),
                  linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      color:var(--text);
      overflow-x:hidden;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    a{color:inherit}

    /* Navigation */
    nav{
      position:sticky;
      top:0;
      z-index:50;
      background: rgba(5,8,22,.72);
      border-bottom:1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(14px);
    }
    .nav-container{
      max-width:var(--max);
      margin:0 auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 20px;
      gap:18px;
    }
    .logo{
      font-weight:800;
      letter-spacing:.2px;
      font-size:18px;
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      color:var(--text);
      white-space:nowrap;
    }
    .brand__mark{
      width:34px;height:34px;
      border-radius:10px;
      background: linear-gradient(135deg, rgba(79,70,229,1) 0%, rgba(34,211,238,1) 100%);
      box-shadow: 0 14px 30px rgba(79,70,229,.25);
      display:inline-block;
      flex:none;
    }
    .brand__text{display:flex;flex-direction:column;line-height:1.1}
    .brand__text small{font-weight:600;color:var(--muted2);font-size:11px}

    .nav-links{display:flex;gap:18px;list-style:none;align-items:center;margin-left:auto}
    .nav-links a{
      text-decoration:none;
      color:var(--muted);
      font-weight:600;
      font-size:14px;
      padding:10px 10px;
      border-radius:10px;
      transition: background .15s ease, color .15s ease;
    }
    .nav-links a:hover{color:var(--text);background:rgba(255,255,255,.06)}

    .nav-login{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      text-decoration:none;
      border-radius:12px;
      padding:11px 14px;
      font-weight:800;
      font-size:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      white-space:nowrap;
      color:var(--muted);
    }
    .nav-login:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18); color:var(--text)}
    .nav-login[aria-current="page"]{border-color: rgba(34,211,238,.45); background: rgba(34,211,238,.10); color:var(--text)}

    .nav-cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      text-decoration:none;
      border-radius:12px;
      padding:11px 14px;
      font-weight:900;
      font-size:14px;
      border:1px solid rgba(79,70,229,.45);
      background: linear-gradient(135deg, rgba(79,70,229,1) 0%, rgba(34,211,238,1) 100%);
      color:#071024 !important;
      transition: transform .15s ease, border-color .15s ease;
      white-space:nowrap;
    }
    .nav-cta:hover{transform: translateY(-1px); border-color: rgba(34,211,238,.75)}

    @media (max-width:768px){.nav-links{display:none}}

    /* Main */
    .main-content{flex:1;display:grid;place-items:center;padding:70px 20px 40px}
    .card{
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.05) 100%);
      box-shadow: var(--shadow);
      padding:26px 22px;
      max-width:460px;
      width:calc(100% - 24px);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 220px at 10% 10%, rgba(34,211,238,.14) 0%, transparent 55%),
                  radial-gradient(520px 240px at 85% 20%, rgba(79,70,229,.18) 0%, transparent 55%);
      pointer-events:none;
    }
    .card > *{position:relative}

    h1{margin:0 0 6px 0;font-size:22px;text-align:center;letter-spacing:-.01em}
    .card-sub{margin:0 0 16px 0;text-align:center;color:var(--muted);font-size:14px;line-height:1.5}

    .field{margin:14px 0}
    label{display:block;font-size:13px;color:rgba(255,255,255,.82);font-weight:800;margin-bottom:8px}
    input{width:100%;padding:14px 14px;border:1px solid rgba(255,255,255,.12);border-radius:12px;font-size:14px;background: rgba(255,255,255,.05);color:var(--text)}
    input::placeholder{color:rgba(255,255,255,.45)}
    input:focus{outline:none;border-color: rgba(34,211,238,.55);box-shadow:0 0 0 4px rgba(34,211,238,.10);background: rgba(255,255,255,.07)}

    .btn{width:100%;margin:18px 0 0;padding:14px 16px;background: linear-gradient(135deg, rgba(79,70,229,1) 0%, rgba(34,211,238,1) 100%);color:#071024;border:none;border-radius:12px;font-weight:950;letter-spacing:.2px;display:block;cursor:pointer;box-shadow: 0 10px 30px rgba(79,70,229,.20);transition: transform .15s ease, box-shadow .15s ease}
    .btn:hover{transform: translateY(-1px);box-shadow: 0 14px 40px rgba(79,70,229,.25)}

    .error{background: rgba(239,68,68,.10);border:1px solid rgba(239,68,68,.35);color:rgba(255,255,255,.88);border-left:4px solid #ef4444;border-radius:14px;padding:12px 12px;font-size:13px;margin-bottom:14px}

    .hint{font-size:13px;color:var(--muted2);margin-top:14px;text-align:center}
    .hint a{color:rgba(255,255,255,.86);text-decoration:underline;text-decoration-color: rgba(34,211,238,.65);text-underline-offset:3px}
    .hint a:hover{color:#fff;text-decoration-color: rgba(167,139,250,.85)}

    .forgot-link{font-size:13px;color:var(--muted2);text-align:right;margin-top:8px}
    .forgot-link a{color:rgba(255,255,255,.72);text-decoration:none}
    .forgot-link a:hover{color:#fff;text-decoration:underline}

    /* Modal styles */
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(4px);display:none;place-items:center;z-index:100}
    .modal-overlay.active{display:grid}
    .modal{background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.05) 100%);border:1px solid rgba(255,255,255,.12);border-radius:var(--radius2);padding:26px 22px;max-width:420px;width:calc(100% - 40px);position:relative;box-shadow:var(--shadow)}
    .modal h2{margin:0 0 8px 0;font-size:18px;text-align:center}
    .modal-sub{color:var(--muted);font-size:13px;text-align:center;margin-bottom:16px}
    .modal-close{position:absolute;top:12px;right:12px;background:none;border:none;color:var(--muted);cursor:pointer;font-size:20px;padding:4px 8px}
    .modal-close:hover{color:#fff}
    .success-msg{background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.35);color:rgba(255,255,255,.88);border-radius:12px;padding:12px;font-size:13px;margin-bottom:14px;text-align:center}
    .btn--secondary{width:100%;margin:10px 0 0;padding:12px 16px;background:rgba(255,255,255,.08);color:var(--text);border:1px solid rgba(255,255,255,.15);border-radius:12px;font-weight:700;cursor:pointer;transition:background .15s ease}
    .btn--secondary:hover{background:rgba(255,255,255,.12)}
    .hidden{display:none!important}

    /* Footer */
    .site-footer{background: rgba(0,0,0,.22);border-top: 1px solid rgba(255,255,255,.08);padding:52px 20px 26px;text-align:center;margin-top:auto}
    .footer-brand{font-weight:900;font-size:20px;letter-spacing:.2px;color:#fff;margin-bottom:6px}
    .footer-tagline{color:rgba(255,255,255,.60);margin-bottom:26px}
    .footer-contact{margin-top:10px;color:rgba(255,255,255,.72);font-size:14px;line-height:1.8}
    .footer-contact h3{color:#fff;margin-bottom:12px;font-size:18px}
    .footer-contact p{margin:6px 0;color:rgba(255,255,255,.72)}
    .footer-links{margin-top:18px;font-size:13px;color:rgba(255,255,255,.62)}
    .footer-links a{color:rgba(255,255,255,.62);margin:0 6px;text-decoration:none}
    .footer-links a:hover{color:#fff;text-decoration:underline}
    .footer-copyright{margin-top:20px;padding-top:18px;border-top:1px solid rgba(255,255,255,.08);color:rgba(255,255,255,.52);font-size:13px}
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <a href="/" class="logo" aria-label="TalkUSA home">
        <span class="brand__mark" aria-hidden="true"></span>
        <span class="brand__text">TalkUSA <small>AI Voice + Video</small></span>
      </a>
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
        <li><a href="/#capabilities">Capabilities</a></li>
        <li><a href="/#workflow">Workflow</a></li>
        <li><a href="/#pricing">Pricing</a></li>
        <li><a href="/#platform">Platform</a></li>
        <li><a href="/#contact">Contact</a></li>
      </ul>
      <div style="display:flex;gap:12px;align-items:center">
        <a href="/login" class="nav-login" aria-current="page">Login</a>
        <a href="/signup" class="nav-cta">Get Started</a>
      </div>
    </div>
  </nav>

  <div class="main-content">
  <div class="card">
    <h1>Sign in</h1>
    <div class="card-sub">Access your dashboard and AI agents.</div>
    <% if (error) { %>
      <div class="error"><%= error %></div>
    <% } %>
    <form method="post" action="/login">
      <div class="field">
        <label>Email or Username</label>
        <input type="text" name="email" placeholder="you@example.com or username" required>
      </div>
      <div class="field">
        <label>Password</label>
        <input type="password" name="password" required>
      </div>
      <div class="forgot-link"><a href="#" id="forgotPasswordLink">Forgot password?</a></div>
      <button class="btn" type="submit">Sign in</button>
    </form>
    <div class="hint">Don't have an account? <a href="/signup">Sign up</a></div>
  </div>
  </div>

  <!-- Forgot Password Modal -->
  <div class="modal-overlay" id="forgotModal">
    <div class="modal">
      <button class="modal-close" id="closeForgotModal">&times;</button>
      
      <!-- Step 1: Enter Email -->
      <div id="forgotStep1">
        <h2>üîê Reset Password</h2>
        <div class="modal-sub">Enter your email address and we'll send you a verification code.</div>
        <div id="forgotError" class="error" style="display:none"></div>
        <div class="field">
          <label>Email Address</label>
          <input type="email" id="forgotEmail" placeholder="you@example.com" required>
        </div>
        <button class="btn" id="sendResetCode">Send Reset Code</button>
        <button class="btn--secondary" id="backToLogin1">Back to Login</button>
      </div>

      <!-- Step 2: Enter Code + New Password -->
      <div id="forgotStep2" class="hidden">
        <h2>üîë Enter Code</h2>
        <div class="modal-sub">We sent a 6-digit code to your email. Enter it below with your new password.</div>
        <div id="resetError" class="error" style="display:none"></div>
        <div id="resetSuccess" class="success-msg" style="display:none"></div>
        <div class="field">
          <label>Verification Code</label>
          <input type="text" id="resetCode" placeholder="123456" maxlength="6" pattern="[0-9]{6}" required>
        </div>
        <div class="field">
          <label>New Password</label>
          <input type="password" id="newPassword" placeholder="Letters and numbers only, max 10 chars" maxlength="10" required>
        </div>
        <button class="btn" id="resetPasswordBtn">Reset Password</button>
        <button class="btn--secondary" id="backToStep1">Back</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-brand">TalkUSA.NET</div>
    <div class="footer-tagline">AI Voice + Video, plus email and mail sending‚Äîon a telecom foundation.</div>
    <div class="footer-contact">
      <h3>Contact Us</h3>
      <p>1209 Mountain Road PL NE, Albuquerque, NM 87110, USA</p>
      <p>support@talkusa.net</p>
      <p>noc@truesip.net</p>
    </div>
    <div class="footer-links">
      <a href="/terms.html">Terms of Service</a>
      <span>‚Ä¢</span>
      <a href="/privacy.html">Privacy Policy</a>
      <span>‚Ä¢</span>
      <a href="/acceptable-use.html">Acceptable Use</a>
      <span>‚Ä¢</span>
      <a href="/cookie-policy.html">Cookie Policy</a>
      <span>‚Ä¢</span>
      <a href="/billing-refund.html">Billing &amp; Refund Policy</a>
    </div>
    <div class="footer-copyright">Copyright ¬© 2026 TrueSIP USA LLC ‚Äî TalkUSA</div>
  </footer>


<script>
  (function() {
    const forgotModal = document.getElementById('forgotModal');
    const forgotStep1 = document.getElementById('forgotStep1');
    const forgotStep2 = document.getElementById('forgotStep2');
    const forgotEmail = document.getElementById('forgotEmail');
    const resetCode = document.getElementById('resetCode');
    const newPassword = document.getElementById('newPassword');
    const forgotError = document.getElementById('forgotError');
    const resetError = document.getElementById('resetError');
    const resetSuccess = document.getElementById('resetSuccess');
    
    let resetToken = null;

    function showError(el, msg) {
      el.textContent = msg;
      el.style.display = 'block';
    }
    function hideError(el) {
      el.style.display = 'none';
    }
    function hideSuccess(el) {
      el.style.display = 'none';
    }

    // Open modal
    document.getElementById('forgotPasswordLink').addEventListener('click', function(e) {
      e.preventDefault();
      forgotModal.classList.add('active');
      forgotStep1.classList.remove('hidden');
      forgotStep2.classList.add('hidden');
      hideError(forgotError);
      forgotEmail.value = '';
      forgotEmail.focus();
    });

    // Close modal
    document.getElementById('closeForgotModal').addEventListener('click', function() {
      forgotModal.classList.remove('active');
    });
    document.getElementById('backToLogin1').addEventListener('click', function() {
      forgotModal.classList.remove('active');
    });

    // Click outside to close
    forgotModal.addEventListener('click', function(e) {
      if (e.target === forgotModal) forgotModal.classList.remove('active');
    });

    // Step 1: Send reset code
    document.getElementById('sendResetCode').addEventListener('click', async function() {
      const email = forgotEmail.value.trim();
      if (!email) {
        showError(forgotError, 'Please enter your email address.');
        return;
      }
      hideError(forgotError);
      
      const btn = this;
      btn.disabled = true;
      btn.textContent = 'Sending...';

      try {
        const res = await fetch('/api/forgot-password', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email })
        });
        const data = await res.json();
        
        if (data.success) {
          resetToken = data.token || null;
          forgotStep1.classList.add('hidden');
          forgotStep2.classList.remove('hidden');
          hideError(resetError);
          hideSuccess(resetSuccess);
          resetCode.value = '';
          newPassword.value = '';
          resetCode.focus();
        } else {
          showError(forgotError, data.message || 'Failed to send reset code.');
        }
      } catch (err) {
        showError(forgotError, 'Network error. Please try again.');
      } finally {
        btn.disabled = false;
        btn.textContent = 'Send Reset Code';
      }
    });

    // Back to step 1
    document.getElementById('backToStep1').addEventListener('click', function() {
      forgotStep2.classList.add('hidden');
      forgotStep1.classList.remove('hidden');
      hideError(forgotError);
    });

    // Step 2: Reset password
    document.getElementById('resetPasswordBtn').addEventListener('click', async function() {
      const code = resetCode.value.trim();
      const password = newPassword.value;
      
      if (!code || code.length !== 6) {
        showError(resetError, 'Please enter the 6-digit code.');
        return;
      }
      if (!password) {
        showError(resetError, 'Please enter a new password.');
        return;
      }
      if (!/^[a-zA-Z0-9]+$/.test(password) || password.length > 10) {
        showError(resetError, 'Password must be letters and numbers only, max 10 characters.');
        return;
      }
      
      hideError(resetError);
      hideSuccess(resetSuccess);
      
      const btn = this;
      btn.disabled = true;
      btn.textContent = 'Resetting...';

      try {
        const res = await fetch('/api/reset-password', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ token: resetToken, code, password })
        });
        const data = await res.json();
        
        if (data.success) {
          resetSuccess.textContent = data.message || 'Password updated! You can now log in.';
          resetSuccess.style.display = 'block';
          // Hide form fields after success
          resetCode.parentElement.style.display = 'none';
          newPassword.parentElement.style.display = 'none';
          btn.style.display = 'none';
          document.getElementById('backToStep1').textContent = 'Go to Login';
          document.getElementById('backToStep1').onclick = function() {
            forgotModal.classList.remove('active');
            // Reset the form for next time
            resetCode.parentElement.style.display = 'block';
            newPassword.parentElement.style.display = 'block';
            btn.style.display = 'block';
            document.getElementById('backToStep1').textContent = 'Back';
          };
        } else {
          showError(resetError, data.message || 'Failed to reset password.');
        }
      } catch (err) {
        showError(resetError, 'Network error. Please try again.');
      } finally {
        btn.disabled = false;
        btn.textContent = 'Reset Password';
      }
    });

    // Allow Enter key in inputs
    forgotEmail.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        document.getElementById('sendResetCode').click();
      }
    });
    resetCode.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        newPassword.focus();
      }
    });
    newPassword.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        document.getElementById('resetPasswordBtn').click();
      }
    });
  })();
</script>

<!-- Start of LiveChat (www.livechat.com) code -->
<script>
    window.__lc = window.__lc || {};
    window.__lc.license = 18919976;
    window.__lc.integration_name = "manual_channels";
    window.__lc.product_name = "livechat";
    ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice))
</script>
<noscript><a href="https://www.livechat.com/chat-with/18919976/" rel="nofollow">Chat with us</a>, powered by <a href="https://www.livechat.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a></noscript>
<!-- End of LiveChat code -->

</body>
</html>
